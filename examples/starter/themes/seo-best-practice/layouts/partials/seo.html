{{ seo_title = page.title }}
{{ if page.fields && page.fields.seo_title }}
  {{ seo_title = page.fields.seo_title.value }}
{{ end }}

{{ seo_desc = site.description }}
{{ if page.fields && page.fields.seo_desc }}
  {{ seo_desc = page.fields.seo_desc.value }}
{{ else if page.summary }}
  {{ seo_desc = page.summary }}
{{ end }}

{{ canonical = site.base_url + page.url }}
{{ if site.url }}
  {{ canonical = site.url + site.base_url + page.url }}
{{ end }}

<link rel="canonical" href="{{ canonical }}" />

{{ if seo_desc }}
  <meta name="description" content="{{ seo_desc }}" />
{{ end }}

<meta property="og:title" content="{{ seo_title }}" />
{{ if seo_desc }}
  <meta property="og:description" content="{{ seo_desc }}" />
{{ end }}
<meta property="og:url" content="{{ canonical }}" />

{{ og_image = null }}
{{ if page.fields && page.fields.og_image }}
  {{ og_image = page.fields.og_image.value }}
{{ else if page.fields && page.fields.cover }}
  {{ og_image = page.fields.cover.value }}
{{ end }}
{{ if og_image }}
  <meta property="og:image" content="{{ og_image }}" />
{{ end }}

{{ twitter_card = "summary" }}
{{ if og_image }}
  {{ twitter_card = "summary_large_image" }}
{{ end }}
<meta name="twitter:card" content="{{ twitter_card }}" />
<meta name="twitter:title" content="{{ seo_title }}" />
{{ if seo_desc }}
  <meta name="twitter:description" content="{{ seo_desc }}" />
{{ end }}
{{ if og_image }}
  <meta name="twitter:image" content="{{ og_image }}" />
{{ end }}

{{ if site.url }}
  {{ home = site.url + "/" }}
  {{ if site.base_url != "" }}
    {{ home = site.url + site.base_url + "/" }}
  {{ end }}

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{{ site.title }}",
    "url": "{{ home }}"
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "{{ site.title }}",
    "url": "{{ home }}"
  }
  </script>
{{ end }}
